import React, { useState, useEffect } from 'react';
import { Home, User, Code, Briefcase, Award, GraduationCap, Mail, Github, Linkedin, BookText, Download } from 'lucide-react';

// Main App component
const App = () => {
  // Define your resume data here
  // Added placeholder image URLs for projects and structured skills for icons
  const resumeData = {
    name: "BHARATH ",
    title: "Aspiring Software Engineer",
    contact: {
      email: "bharathreddy3381@gmail.com",
      phone: "+919182037493",
      location: "Vinukonda, India",
      linkedin: "https://www.linkedin.com/in/bharath-redddy/", // Replace with actual LinkedIn URL
      github: "https://github.com/bharathreddy-k",     // Replace with actual GitHub URL
      leetcode: "https://leetcode.com/u/Bharath_Kotha/"  // Replace with actual LeetCode URL
    },
    summary: "Aspiring software engineer with a strong foundation in programming, algorithms, and data structures. Experienced in Java, Python, with projects in web development and machine learning. Passionate about solving complex problems and continuously learning new technologies. Eager to contribute to innovative teams and grow in a dynamic software development environment.",
    skills: [
      { name: "Java", icon: "Code" }, // Using generic 'Code' icon for programming languages
      { name: "Python", icon: "Code" },
      { name: "DSA", icon: "Code" },
      { name: "OOPs", icon: "Code" },
      { name: "AWS Cloud Foundations", icon: "Cloud" }, // Placeholder for Cloud icon
      { name: "AWS Architecting", icon: "Cloud" },
      { name: "SQL", icon: "Database" }, // Placeholder for Database icon
      { name: "Communication", icon: "MessageSquare" }, // Placeholder for communication icon
      { name: "Leadership", icon: "Users" }, // Placeholder for leadership icon
      { name: "English", icon: "Globe" }, // Placeholder for language icon
      { name: "Telugu", icon: "Globe" }
    ],
    education: [
      {
        institution: "Vellore Institute of Technology",
        degree: "B-Tech - Computer Science and Engineering",
        duration: "09/2022 - Present",
        location: "Amaravati, India"
      },
      {
        institution: "Narayana Junior College",
        degree: "Intermediate Education - M.P.C",
        duration: "06/2020 - 06/2022",
        location: "Vijayawada, India"
      }
    ],
    experience: [
      {
        title: "Ecommerce Shipping Prediction Using Machine Learning",
        duration: "06/2024 - 07/2024",
        type: "Virtual",
        description: [
          "Developed a predictive model to estimate shipping times using machine learning algorithms, improving delivery accuracy.",
          "Analyzed historical shipping data to identify key factors affecting delivery delays and optimized prediction accuracy.",
          "Implemented the model using Python and machine learning libraries, achieving high prediction efficiency."
        ]
      }
    ],
    projects: [
      {
        title: "Automated Banking System",
        image: "https://placehold.co/400x250/333333/FFFFFF?text=Banking+System", // Placeholder image
        description: "Designed and developed an automated banking system with secure transaction processing and account management. Implemented key features like user authentication, fund transfers, and transaction history tracking. Integrated database management for efficient and secure storage of customer financial data.",
         githubLink: "https://github.com/bharathreddy-k/Automated-Banking-System", // Placeholder linking-Machine-Learning" ,
           
      },
      // Note: The second project 'Density Based Traffic Control System' was missing a liveLink and githubLink in the previous version.
      // I've commented it out for now to avoid errors, but you can uncomment and add links if available.
      // {
      //   title: "Density Based Traffic Control System",
      //   image: "https://placehold.co/400x250/333333/FFFFFF?text=Traffic+System", // Placeholder image
      //   description: "Developed an intelligent traffic signal system that dynamically adjusts signal timings based on real-time traffic density. Improved traffic efficiency by reducing congestion and minimizing wait times at intersections.",
      //   githubLink: "#", // Placeholder link
      //   liveLink: "#"    // Placeholder link
      // }
    ],
    achievements: [
      "Selected for the second level in Sakshi SpellBee competitions.",
      "Played the under-19 ICSE Volleyball Nationals.",
      "Captain of the Rotaract club at VIT-AP."
    ],
    certificates: [
      "Artificial Intelligence using Google TensorFlow Powered by Google Developers (Issued by Smart Interns)",
      "ChatGPT and AI Tolls Workshop by be10x. (Issued by be10x)",
      "GAWS Academy Gratitude (Cloud Architecting, Cloud Foundations5) (Issued by AWS.)",
      "AWS Cloud Practitioner (Issued by AWS.)"
    ]
  };

  // Map string icon names to Lucide React components
  const LucideIcon = ({ name, ...props }) => {
    const IconComponent = {
      Home: Home,
      User: User,
      Code: Code,
      Briefcase: Briefcase,
      Award: Award,
      GraduationCap: GraduationCap,
      Mail: Mail,
      Github: Github,
      Linkedin: Linkedin,
      BookText: BookText,
      Download: Download,
      Cloud: ({ size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <path d="M17.5 18H18a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2h-1.5a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2z" />
          <path d="M11 18a2 2 0 0 0 2 2h.5a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H13a2 2 0 0 0-2 2v1z" />
          <path d="M7 18a2 2 0 0 0 2 2h.5a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v1z" />
          <path d="M13 10a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v1a4 4 0 0 0 4 4h.5" />
          <path d="M16 10a4 4 0 0 0-4-4H11a4 4 0 0 0-4 4v1a4 4 0 0 0 4 4h.5" />
          <path d="M19 10a4 4 0 0 0-4-4H14a4 4 0 0 0-4 4v1a4 4 0 0 0 4 4h.5" />
        </svg>
      ),
      Database: ({ size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <ellipse cx="12" cy="5" rx="9" ry="3" />
          <path d="M3 5V19A9 3 0 0 0 21 19V5" />
          <path d="M3 12A9 3 0 0 0 21 12" />
        </svg>
      ),
      MessageSquare: ({ size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
        </svg>
      ),
      Users: ({ size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
          <circle cx="9" cy="7" r="4" />
          <path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" />
        </svg>
      ),
      Globe: ({ size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <circle cx="12" cy="12" r="10" />
          <path d="M12 2a14.5 14.5 0 0 0 0 20A14.5 14.5 0 0 0 12 2" />
          <path d="M2 12h20" />
        </svg>
      ),
    }[name];
    return IconComponent ? <IconComponent {...props} /> : null;
  };

  // State for active section for navigation highlighting
  const [activeSection, setActiveSection] = useState('home');

  // Smooth scroll and section highlighting logic
  useEffect(() => {
    const handleScroll = () => {
      const sections = document.querySelectorAll('section[id]');
      let currentActive = 'home';
      sections.forEach(section => {
        const sectionTop = section.offsetTop - 100; // Offset for header
        const sectionBottom = sectionTop + section.offsetHeight;
        if (window.scrollY >= sectionTop && window.scrollY < sectionBottom) {
          currentActive = section.id;
        }
      });
      setActiveSection(currentActive);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const scrollToSection = (id) => {
    document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
  };

  // Helper component for section titles
  const SectionTitle = ({ children, id }) => (
    <h2 id={id} className="text-3xl font-bold text-white mb-8 text-center pt-16 -mt-16 relative">
      <span className="relative inline-block pb-2">
        {children}
        <span className="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-blue-500 rounded-full"></span>
      </span>
    </h2>
  );

  return (
    <div className="min-h-screen bg-gray-900 text-gray-300 font-inter">
      {/* Navbar */}
      <nav className="fixed top-0 left-0 right-0 bg-gray-800 bg-opacity-90 backdrop-blur-sm z-50 shadow-lg">
        <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
          <div className="flex-shrink-0">
            <a href="#home" onClick={() => scrollToSection('home')} className="text-white text-2xl font-bold hover:text-blue-400 transition duration-300">
              {resumeData.name.split(' ')[0]}
            </a>
          </div>
          <div className="hidden md:block">
            <div className="ml-10 flex items-baseline space-x-4">
              {[
                { name: 'Home', id: 'home', icon: Home },
                { name: 'About', id: 'about', icon: User },
                { name: 'Skills', id: 'skills', icon: Code },
                { name: 'Experience', id: 'experience', icon: Briefcase },
                { name: 'Projects', id: 'projects', icon: BookText },
                { name: 'Achievements', id: 'achievements', icon: Award },
                { name: 'Certificates', id: 'certificates', icon: GraduationCap },
                { name: 'Contact', id: 'contact', icon: Mail }
              ].map((item) => (
                <a
                  key={item.name}
                  href={`#${item.id}`}
                  onClick={() => scrollToSection(item.id)}
                  className={`flex items-center px-3 py-2 rounded-md text-sm font-medium transition duration-300
                    ${activeSection === item.id ? 'bg-blue-700 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}
                >
                  <item.icon className="mr-2 h-4 w-4" />
                  {item.name}
                </a>
              ))}
            </div>
          </div>
          {/* Mobile menu button - Add later if needed */}
        </div>
      </nav>

      {/* Main Content */}
      <main className="pt-20"> {/* Padding top to account for fixed navbar */}

        {/* Home/Hero Section */}
        <section id="home" className="relative h-screen flex items-center justify-center text-center bg-cover bg-center" style={{ backgroundImage: 'url(https://images.unsplash.com/photo-1517694712202-14dd9538aa97?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)' }}>
          <div className="absolute inset-0 bg-black opacity-70"></div>
          <div className="relative z-10 p-4 max-w-3xl mx-auto">
            {/* Profile picture with "KB" text */}
            <div className="w-32 h-32 mx-auto mb-6 rounded-full overflow-hidden border-4 border-blue-500 shadow-lg flex items-center justify-center bg-gray-700 text-white text-5xl font-bold">
              KB
            </div>
            <h1 className="text-5xl sm:text-6xl font-extrabold text-white leading-tight mb-4">
              Hi, I'm <span className="text-blue-400">{resumeData.name.split(' ')[0]}</span>
            </h1>
            <p className="text-2xl sm:text-3xl text-gray-200 mb-8 font-light">
              {resumeData.title}
            </p>
            {/* Download CV button removed */}
          </div>
        </section>

        {/* About Section */}
        <section id="about" className="py-20 px-4 sm:px-6 lg:px-8 bg-gray-800">
          <div className="max-w-4xl mx-auto">
            <SectionTitle>About Me</SectionTitle>
            <p className="text-lg text-gray-300 leading-relaxed text-center">
              {resumeData.summary}
            </p>
          </div>
        </section>

        {/* Skills Section */}
        <section id="skills" className="py-20 px-4 sm:px-6 lg:px-8 bg-gray-900">
          <div className="max-w-4xl mx-auto">
            <SectionTitle>Skills</SectionTitle>
            <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
              {resumeData.skills.map((skill, index) => (
                <div key={index} className="bg-gray-800 p-6 rounded-lg shadow-md flex flex-col items-center text-center transition duration-300 hover:bg-gray-700 hover:shadow-xl">
                  <LucideIcon name={skill.icon} className="h-10 w-10 text-blue-400 mb-3" />
                  <h3 className="text-lg font-semibold text-white">{skill.name}</h3>
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* Professional Experience Section */}
        <section id="experience" className="py-20 px-4 sm:px-6 lg:px-8 bg-gray-800">
          <div className="max-w-4xl mx-auto">
            <SectionTitle>Professional Experience</SectionTitle>
            <div className="space-y-8">
              {resumeData.experience.map((exp, index) => (
                <div key={index} className="bg-gray-700 p-6 rounded-lg shadow-md transition duration-300 hover:bg-gray-600">
                  <h3 className="text-xl font-semibold text-white mb-2">{exp.title}</h3>
                  <p className="text-blue-400 text-sm mb-3">{exp.duration} | {exp.type}</p>
                  <ul className="list-disc list-inside text-gray-300 ml-4 space-y-1">
                    {exp.description.map((item, idx) => (
                      <li key={idx}>{item}</li>
                    ))}
                  </ul>
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* Projects Section */}
        <section id="projects" className="py-20 px-4 sm:px-6 lg:px-8 bg-gray-900">
          <div className="max-w-4xl mx-auto">
            <SectionTitle>Projects</SectionTitle>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
              {resumeData.projects.map((project, index) => (
                <div key={index} className="bg-gray-800 rounded-lg shadow-md overflow-hidden transition duration-300 hover:shadow-xl transform hover:-translate-y-1">
                  <img
                    src={project.image}
                    alt={project.title}
                    className="w-full h-48 object-cover object-center"
                    onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/400x250/333333/FFFFFF?text=Project+Image"; }}
                  />
                  <div className="p-6">
                    <h3 className="text-xl font-semibold text-white mb-2">{project.title}</h3>
                    <p className="text-gray-400 text-sm mb-4">{project.description}</p>
                    <div className="flex space-x-4">
                      {project.githubLink && (
                        <a href={project.githubLink} target="_blank" rel="noopener noreferrer" className="inline-flex items-center text-blue-400 hover:text-blue-300 transition duration-300">
                          <Github className="h-5 w-5 mr-2" /> GitHub
                        </a>
                      )}
                      {project.liveLink && (
                        <a href={project.liveLink} target="_blank" rel="noopener noreferrer" className="inline-flex items-center text-blue-400 hover:text-blue-300 transition duration-300">
                          <Code className="h-5 w-5 mr-2" /> Live Demo
                        </a>
                      )}
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* Education Section */}
        <section id="education" className="py-20 px-4 sm:px-6 lg:px-8 bg-gray-800">
          <div className="max-w-4xl mx-auto">
            <SectionTitle>Education</SectionTitle>
            <div className="space-y-8">
              {resumeData.education.map((edu, index) => (
                <div key={index} className="bg-gray-700 p-6 rounded-lg shadow-md transition duration-300 hover:bg-gray-600">
                  <h3 className="text-xl font-semibold text-white mb-1">{edu.institution}</h3>
                  <p className="text-gray-300">{edu.degree}</p>
                  <p className="text-blue-400 text-sm">{edu.duration} | {edu.location}</p>
                  {edu.cgpa && <p className="text-gray-400 text-sm mt-1">CGPA: {edu.cgpa}</p>}
                  {edu.percentage && <p className="text-gray-400 text-sm mt-1">Percentage: {edu.percentage}</p>}
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* Achievements Section */}
        <section id="achievements" className="py-20 px-4 sm:px-6 lg:px-8 bg-gray-900">
          <div className="max-w-4xl mx-auto">
            <SectionTitle>Achievements</SectionTitle>
            <ul className="list-none space-y-4 text-center">
              {resumeData.achievements.map((item, index) => (
                <li key={index} className="bg-gray-800 p-4 rounded-lg shadow-md flex items-center justify-center transition duration-300 hover:bg-gray-700">
                  <Award className="h-6 w-6 text-blue-400 mr-3 flex-shrink-0" />
                  <span className="text-lg text-gray-300">{item}</span>
                </li>
              ))}
            </ul>
          </div>
        </section>

        {/* Certificates Section */}
        <section id="certificates" className="py-20 px-4 sm:px-6 lg:px-8 bg-gray-800">
          <div className="max-w-4xl mx-auto">
            <SectionTitle>Certificates</SectionTitle>
            <ul className="list-none space-y-4 text-center">
              {resumeData.certificates.map((item, index) => (
                <li key={index} className="bg-gray-700 p-4 rounded-lg shadow-md flex items-center justify-center transition duration-300 hover:bg-gray-600">
                  <GraduationCap className="h-6 w-6 text-blue-400 mr-3 flex-shrink-0" />
                  <span className="text-lg text-gray-300">{item}</span>
                </li>
              ))}
            </ul>
          </div>
        </section>

        {/* Contact Section */}
        <section id="contact" className="py-20 px-4 sm:px-6 lg:px-8 bg-gray-900">
          <div className="max-w-4xl mx-auto">
            <SectionTitle>Contact Me</SectionTitle>
            <div className="text-center space-y-6">
              <p className="text-lg text-gray-300">
                Feel free to reach out to me for collaborations or just to say hello!
              </p>
              <div className="flex flex-wrap justify-center gap-6 mt-8">
                <a href={`mailto:${resumeData.contact.email}`} className="flex items-center bg-gray-800 p-4 rounded-lg shadow-md text-blue-400 hover:bg-gray-700 transition duration-300">
                  <Mail className="h-6 w-6 mr-3" />
                  {resumeData.contact.email}
                </a>
                <a href={`tel:${resumeData.contact.phone}`} className="flex items-center bg-gray-800 p-4 rounded-lg shadow-md text-blue-400 hover:bg-gray-700 transition duration-300">
                  <span className="mr-3 text-2xl">üìû</span> {/* Using emoji for phone icon */}
                  {resumeData.contact.phone}
                </a>
                <div className="flex items-center bg-gray-800 p-4 rounded-lg shadow-md text-blue-400">
                  <span className="mr-3 text-2xl">üìç</span> {/* Using emoji for location icon */}
                  {resumeData.contact.location}
                </div>
              </div>
              <div className="flex justify-center space-x-6 mt-8">
                {resumeData.contact.linkedin && (
                  <a href={resumeData.contact.linkedin} target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:text-blue-300 transition duration-300">
                    <Linkedin className="h-8 w-8" />
                  </a>
                )}
                {resumeData.contact.github && (
                  <a href={resumeData.contact.github} target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:text-blue-300 transition duration-300">
                    <Github className="h-8 w-8" />
                  </a>
                )}
                {resumeData.contact.leetcode && (
                  <a href={resumeData.contact.leetcode} target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:text-blue-300 transition duration-300">
                    <span className="text-3xl">üßÆ</span> {/* Using emoji for LeetCode icon */}
                  </a>
                )}
              </div>
            </div>
          </div>
        </section>

        {/* Footer */}
        <footer className="bg-gray-800 py-8 text-center text-gray-400 text-sm">
          <p>&copy; {new Date().getFullYear()} {resumeData.name}. All rights reserved.</p>
        </footer>

      </main>
    </div>
  );
};

export default App;
